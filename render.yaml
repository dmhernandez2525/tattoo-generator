# INK SYNTHESIS - Render Infrastructure Configuration
# Next.js 15 App Router + PostgreSQL

services:
  - type: web
    name: ink-synthesis-site
    runtime: node
    plan: free
    buildCommand: NODE_ENV=development npm ci && npm run build
    startCommand: NODE_ENV=production npm run start -- -p $PORT
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: DATABASE_URL
        fromDatabase:
          name: ink-synthesis-db
          property: connectionString
      - key: NEXT_PUBLIC_DEMO_MODE
        value: "true"
      - key: NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
        sync: false
      - key: CLERK_SECRET_KEY
        sync: false

# Database - PostgreSQL (Basic 256MB: ~$7/month)
databases:
  - name: ink-synthesis-db
    plan: basic-256mb
    databaseName: ink_synthesis
    user: ink_synthesis
