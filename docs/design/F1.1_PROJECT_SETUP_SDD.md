# Software Design Document - F1.1 Project Setup

**Version:** 1.0.0
**Status:** ðŸŸ¨ In Progress
**Last Updated:** 2026-02-03

## 1. Overview

### Purpose
Establish the foundation for INK SYNTHESIS using Next.js 15 (App Router), strict TypeScript, Tailwind CSS v4, shadcn/ui components, Prisma with PostgreSQL, and Render deployment configuration.

### Goals
- Run the web app on Next.js 15 with App Router.
- Enforce strict TypeScript settings.
- Configure Tailwind CSS v4 and reuse existing UI components.
- Provide shadcn/ui configuration for component scaffolding.
- Add Prisma + PostgreSQL baseline setup.
- Update Render deployment configuration for Next.js.

### Non-Goals
- Implement authentication, AI generation, or database models (covered in later features).
- Build advanced UI/UX systems beyond existing prototype.

## 2. Architecture

### High-Level Architecture
```
Next.js 15 App Router
â”œâ”€â”€ app/ (routes, layouts)
â”œâ”€â”€ components/ (UI + feature components)
â”œâ”€â”€ hooks/ (client hooks)
â”œâ”€â”€ lib/ (shared utilities)
â”œâ”€â”€ prisma/ (schema + client)
â””â”€â”€ public/ (static assets)
```

### Key Decisions
- **App Router** provides route-level layouts and server/client separation.
- **Client components** are explicitly marked for stateful UI.
- **Prisma** handles database access; PostgreSQL is the target database.
- **Tailwind v4** is configured via PostCSS and CSS-first theming.
- **shadcn/ui** is used for UI primitives and design consistency.

## 3. Data & Configuration

### Environment Variables
```
DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/ink_synthesis
NEXT_PUBLIC_DEMO_MODE=false
```

### Prisma
- Base Prisma schema with `datasource` and `generator`.
- Client output in `node_modules/@prisma/client`.

## 4. UI & Styling

### Tailwind v4
- `app/globals.css` imports Tailwind and defines `@theme` variables.
- Typography is defined via CSS variables and applied to base elements.

### shadcn/ui
- `components.json` defines configuration for Next.js, Tailwind, and aliasing.
- Existing UI primitives remain in `src/components/ui`.

## 5. Files & Modules

### New/Updated Files
- `src/app/layout.tsx`: Root layout with global styles.
- `src/app/page.tsx`: Entry page rendering the app UI.
- `src/app/globals.css`: Tailwind v4 + theme variables.
- `next.config.ts`: Next.js configuration.
- `postcss.config.mjs`: Tailwind v4 PostCSS plugin.
- `tailwind.config.ts`: Tailwind config (content + theme extensions).
- `components.json`: shadcn/ui configuration.
- `prisma/schema.prisma`: Prisma schema baseline.
- `.env.example`: Environment variable template.

## 6. Testing & Validation

### Build Validation
- `npm run build` must succeed.

### Quality Checks
- `npm run lint`
- `npm run type-check`

## 7. Deployment

### Render
- Single Next.js web service (`ink-synthesis-site`) with Node runtime.
- `buildCommand` uses `NODE_ENV=development npm ci && npm run build`.
- `startCommand` uses `NODE_ENV=production npm run start`.

## 8. Risks & Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|
| Migration from Vite to Next may leave unused files | Low | Keep unused files but ensure build uses Next entry points |
| Prisma schema without models limits DB use | Low | Models added in F1.4 |
| Render config drift | Medium | Update `render.yaml` and document expected env vars |
